"""API 客户端常量配置

集中管理所有魔法数字和常量，便于维护和统一修改。

设计原则：
    - 所有常量集中定义，避免散布在代码中
    - 使用有意义的常量名称，提高代码可读性
    - 便于统一调整和配置管理

使用示例：
    from src.api.constants import DEFAULT_MAX_RETRIES, DEFAULT_TIMEOUT_SECONDS

    client = OpenAIClient(
        ...,
        max_retries=DEFAULT_MAX_RETRIES,
        timeout=DEFAULT_TIMEOUT_SECONDS
    )
"""

# ============================================================================
# 重试配置
# ============================================================================

DEFAULT_MAX_RETRIES = 3
"""默认最大重试次数

用于 API 请求失败时的自动重试。使用指数退避策略，避免频繁重试。
"""

RETRY_MULTIPLIER = 1
"""重试等待时间的乘数（秒）

指数退避策略：等待时间 = RETRY_MULTIPLIER * (2 ** (重试次数 - 1))
"""

RETRY_MIN_WAIT = 2
"""最小重试等待时间（秒）

第一次重试至少等待 2 秒。
"""

RETRY_MAX_WAIT = 10
"""最大重试等待时间（秒）

即使重试次数很多，单次等待也不会超过 10 秒。
"""

# ============================================================================
# 超时配置
# ============================================================================

DEFAULT_TIMEOUT_SECONDS = 120
"""默认请求超时时间（秒）

包括连接超时和读取超时。对于长时间生成的任务，可能需要增加此值。
"""

CONNECTION_TIMEOUT_SECONDS = 30
"""连接超时时间（秒）

仅包括建立 TCP 连接的时间，不包括数据传输时间。
"""

# ============================================================================
# 温度参数
# ============================================================================

DEFAULT_TEMPERATURE = 0.7
"""默认温度参数

温度参数控制输出的随机性：
- 0.0: 完全确定性，总是选择概率最高的 token
- 0.7: 平衡创造性和确定性（推荐）
- 1.0+: 更高随机性，更多创造性
"""

QUALITY_EVALUATION_TEMPERATURE = 0.3
"""质量评估使用的温度参数

质量评估需要更确定性的输出，因此使用较低的温度（0.3）。
"""

# ============================================================================
# Token 配置
# ============================================================================

VALIDATION_MAX_TOKENS = 10
"""连接验证时使用的最大 token 数

用于测试 API 连接时，只生成少量 token 以节省时间和成本。
"""

DEFAULT_MAX_TOKENS = 1024
"""默认最大生成 token 数

常规对话和文本生成任务使用的默认值。
"""

# ============================================================================
# Judge 权重配置
# ============================================================================

JUDGE_WEIGHT_DEEPSEEK = 0.30
"""DeepSeek Judge 的权重

DeepSeek Judge 在综合评分中的权重为 30%。
"""

JUDGE_WEIGHT_GLM = 0.30
"""GLM Judge 的权重

GLM Judge 在综合评分中的权重为 30%。
"""

JUDGE_WEIGHT_MINIMAX = 0.40
"""MiniMax Judge 的权重

MiniMax Judge 在综合评分中的权重为 40%（最高，作为主要参考）。
"""

# ============================================================================
# 评分范围
# ============================================================================

STANDARD_SCORE_MIN = 1
"""标准评分的最小值（1-5 分制）

用于大多数质量评估场景。
"""

STANDARD_SCORE_MAX = 5
"""标准评分的最大值（1-5 分制）

用于大多数质量评估场景。
"""

MINIMAX_SCORE_MIN = 0
"""MiniMax 标准评分的最小值（0-10 分制）

用于 MiniMax 标准评估，提供更细粒度的评分。
"""

MINIMAX_SCORE_MAX = 10
"""MiniMax 标准评分的最大值（0-10 分制）

用于 MiniMax 标准评估，提供更细粒度的评分。
"""

# ============================================================================
# 评分等级阈值（MiniMax 0-10 分制）
# ============================================================================

GRADE_EXCELLENT_MIN = 9.0
"""优秀等级的最低分数

9.0-10.0 分为优秀等级。
"""

GRADE_GOOD_MIN = 7.5
"""良好等级的最低分数

7.5-8.9 分为良好等级。
"""

GRADE_ADEQUATE_MIN = 6.0
"""合格等级的最低分数

6.0-7.4 分为合格等级。
"""

GRADE_POOR_MIN = 3.0
"""不合格等级的最低分数

3.0-5.9 分为不合格等级。
"""

# 0-2.9 分为严重缺陷等级

# ============================================================================
# 统计配置
# ============================================================================

DEFAULT_CONFIDENCE_LEVEL = 0.95
"""默认置信水平

用于计算置信区间。95% 置信水平意味着真实值有 95% 的概率落在区间内。
"""

HIGH_AGREEMENT_THRESHOLD = 0.5
"""高一致性阈值

Pearson 相关系数 > 0.5 表示 Judge 之间有较高一致性。
"""

MEDIUM_AGREEMENT_THRESHOLD = 1.0
"""中等一致性阈值

Pearson 相关系数 > 1.0 表示 Judge 之间有一致性（实际不可能超过 1.0，此值需调整）。
"""

# ============================================================================
# 性能基准
# ============================================================================

TARGET_TTFT_MS = 500
"""目标 TTFT（Time to First Token）

优秀的首次响应时间应低于 500 毫秒。
"""

TARGET_GENERATION_SPEED = 50
"""目标生成速度（tokens/秒）

优秀的生成速度应高于 50 tokens/秒。
"""

# ============================================================================
# 维度权重（MiniMax 标准）
# ============================================================================

DIMENSION_WEIGHT_BASIC_PERFORMANCE = 0.25
"""基础性能维度的权重

基础性能包括 TTFT、吞吐量和稳定性。
"""

DIMENSION_WEIGHT_CORE_CAPABILITIES = 0.35
"""核心能力维度的权重

核心能力包括理解、推理、代码生成等。
"""

DIMENSION_WEIGHT_PRACTICAL_SCENARIOS = 0.25
"""实用场景维度的权重

实用场景包括摘要、翻译、创意写作等。
"""

DIMENSION_WEIGHT_ADVANCED_FEATURES = 0.15
"""高级特性维度的权重

高级特性包括多轮对话、长文本处理等。
"""
